// i18n.js
(function(e){function s(e,t){if(!t){t=""}var n={};for(var r in e){var i=e[r];r=t+r;if($.type(i)=="string"||$.type(i)=="function"){n[r]=i}else{$.extend(n,s(i,r+"."))}}return n}function a(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var t;var n;var r={};var i=[];e.extend({i18n:{translations:{},missing:function(e,t){throw new this.error('Translation data missing for locale "'+e+'": '+t)},error:function(e){return new Error(e)},add:function(e,n,i){if(i===undefined&&typeof n==="object"){i=n}if(!this.translations[e]){var o={};o.merge=function(e){e=s(e);for(var t in e){this[t]=e[t]}};this.translations[e]=$.extend(o,n?this.translations[n]:{},s($.i18n.defaults.translation))}this.translations[e].merge(i);for(var u in r){this.translations[e][u]=this.translations[e][r[u]]}if(e==t){this.setLocale(t)}},deprecate:function(e){e=s(e);for(var t in e){r[t]=e[t]}},setLocale:function(e){newTranslation=this.translations[e];if(!newTranslation){throw new $.i18n.error('Translation for locale "'+e+'" not defined')}t=e;n=newTranslation;for(var r=0;r<i.length;r++){i[r](t)}},localeChange:function(e){i.push(e)},translate:function(e,r){if(!r){r={}}if("count"in r){if(r.count==0&&n[e+".none"]){e=e+".none"}else if(n[e+"."+n.plural(r.count)]){e=e+"."+n.plural(r.count)}}var i=n[e]||r.defaultText&&"{{defaultText}}";if(i==null){i=$.i18n.missing(t,e)}var s=$.extend({},r);for(var o in s){s[o]=$.i18n.localize(s[o])}i=$.interpolate(i,s,{prefix:"{{",suffix:"}}"}).text;return i},localize:function(e,t){if(e){if($.type(e)=="date"){t=$.extend({},$.i18n.defaults.localize,t);format=n[t.type+".formats."+t.format]||t.format;format=format.replace(/%a/,$.i18n.translate("date.abbrDayNames."+e.getDay()));format=format.replace(/%A/,$.i18n.translate("date.dayNames."+e.getDay()));format=format.replace(/%b/,$.i18n.translate("date.abbrMonthNames."+e.getMonth()));format=format.replace(/%B/,$.i18n.translate("date.monthNames."+e.getMonth()));format=format.replace(/%p/,$.i18n.translate("time."+(e.getHours()<12?"am":"pm")));e=$.strftime(e,format)}else if($.type(e)=="number"){e=$.withDelimiter(e,$.i18n.translate("number.delimiter"));if(t&&t.currency){e=$.i18n.translate("number.currency")+e}}else if(e.jquery){var r=e.appendTo("body");e=$("<div />").append(r.clone()).html();r.remove()}else if($.type(e)!="string"){e=e.toString()}}return e},defaults:{translation:{plural:function(e){return e==1?"one":"many"},date:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"}},time:{am:"am",pm:"pm",formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"}},number:{delimiter:",",currency:"$"}},localize:{format:"default",type:"time"},locale:"en-US"}}});e.extend($.i18n,{t:$.i18n.translate,l:$.i18n.localize});$.i18n.add($.i18n.defaults.locale,{});$.i18n.setLocale($.i18n.defaults.locale);var o={zeropad:function(e){return e>9?e:"0"+e},a:function(e){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]},A:function(e){return["Sunday","Monday","Tuedsay","Wednesday","Thursday","Friday","Saturday"][e.getDay()]},b:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]},B:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]},c:function(e){return e.toString()},d:function(e){return this.zeropad(e.getDate())},H:function(e){return this.zeropad(e.getHours())},I:function(e){return this.zeropad((e.getHours()+12)%12)},m:function(e){return this.zeropad(e.getMonth()+1)},M:function(e){return this.zeropad(e.getMinutes())},p:function(e){return this.H(e)<12?"AM":"PM"},S:function(e){return this.zeropad(e.getSeconds())},w:function(e){return e.getDay()},y:function(e){return this.zeropad(this.Y(e)%100)},Y:function(e){return e.getFullYear()},z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+this.zeropad(parseInt(Math.abs(t/60),10))+this.zeropad(t%60)},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(e){return"%"}};e.extend({strftime:function(e,t,n){if(n){var r=e;var i={toString:function(){return r.toString()},getTimezoneOffset:function(){return r.getTimezoneOffset()}};var s=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds","String"];for(var u=0;u<s.length;u++){i["get"+s[u]]=function(e){return function(){return r["getUTC"+e]()}}(s[u])}e=i}for(var a in o){if(a.length==1){t=t.replace("%"+a,o[a](e))}}return t}});e.extend({inflector:{inflections:{plurals:[],singulars:[],uncountables:[]},plural:function(e,t){$.inflector.inflections.plurals.unshift([e,t]);return this},singular:function(e,t){$.inflector.inflections.singulars.unshift([e,t]);return this},irregular:function(e,t){if(e.charAt(0).toUpperCase()==t.charAt(0).toUpperCase()){this.plural(new RegExp("("+e.charAt(0)+")"+e.substring(1)+"$","i"),"$1"+t.substring(1));this.singular(new RegExp("("+t.charAt(0)+")"+t.substring(1)+"$","i"),"$1"+e.substring(1))}else{this.plural(new RegExp(e.charAt(0).toUpperCase()+e.substring(1)+"$"),t.charAt(0).toUpperCase()+t.substring(1));this.plural(new RegExp(e.charAt(0).toLowerCase()+e.substring(1)+"$"),t.charAt(0).toLowerCase()+t.substring(1));this.singular(new RegExp(t.charAt(0).toUpperCase()+t.substring(1)+"$"),e.charAt(0).toUpperCase()+e.substring(1));this.singular(new RegExp(t.charAt(0).toLowerCase()+t.substring(1)+"$"),e.charAt(0).toLowerCase()+e.substring(1))}this.singular(new RegExp("("+e.charAt(0)+")"+e.substring(1)+"$","i"),"$1"+e.substring(1));this.plural(new RegExp("("+t.charAt(0)+")"+t.substring(1)+"$","i"),"$1"+t.substring(1));return this},uncountable:function(){for(var e=0;e<arguments.length;e++){$.inflector.inflections.uncountables.unshift(new RegExp(arguments[e]+"$","i"))}return this}}});var u=function(e,t){var n=e.toLowerCase();if(n==""){return e}else{for(var r=0;r<$.inflector.inflections.uncountables.length;r++){var i=$.inflector.inflections.uncountables[r];if(i.test(e)){return e}}for(var r=0;r<t.length;r++){var s=t[r];var i=s[0];var o=s[1];if(i.test(e)){return e.replace(i,o)}}}return e};e.extend({pluralize:function(e,t){if(e==null){e=""}var n;if(t==1){n=e}else{n=u(e,$.inflector.inflections.plurals)}if(t!=null){n=t+" "+n}return n},singularize:function(e){if(e==null){return""}return u(e,$.inflector.inflections.singulars)},constantize:function(e){var t=window;var n=e.split(".");for(var r=0;r<n.length;r++){t=t[n[r]];if(!t)throw""+e+" is not a valid constant name!"}return t},camelize:function(e,t){if(e==null){e=""}if(t!=false){return e.toString().replace(/(?:^|_)(.)/g,function(e,t){return t.toUpperCase()})}else{return e.charAt(0)+this.camelize(e).slice(1)}},titleize:function(e){if(e==null){e=""}var t=e.replace("_"," ");var n=t.split(" ");for(var r=0;r<n.length;r++){n[r]=n[r].substr(0,1).toUpperCase()+n[r].substr(1)}return n.join(" ")}});e.inflector.plural(/$/,"s").plural(/s$/i,"s").plural(/(ax|test)is$/i,"$1es").plural(/(octop|vir)us$/i,"$1i").plural(/(alias|status)$/i,"$1es").plural(/(bu)s$/i,"$1ses").plural(/(buffal|tomat)o$/i,"$1oes").plural(/([ti])um$/i,"$1a").plural(/sis$/i,"ses").plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves").plural(/(hive)$/i,"$1s").plural(/([^aeiouy]|qu)y$/i,"$1ies").plural(/(x|ch|ss|sh)$/i,"$1es").plural(/(matr|vert|ind)ix|ex$/i,"$1ices").plural(/([m|l])ouse$/i,"$1ice").plural(/^(ox)$/i,"$1en").plural(/(quiz)$/i,"$1zes").singular(/s$/i,"").singular(/(n)ews$/i,"$1ews").singular(/([ti])a$/i,"$1um").singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis").singular(/(^analy)ses$/i,"$1sis").singular(/([^f])ves$/i,"$1fe").singular(/(hive)s$/i,"$1").singular(/(tive)s$/i,"$1").singular(/([lr])ves$/i,"$1f").singular(/([^aeiouy]|qu)ies$/i,"$1y").singular(/(s)eries$/i,"$1eries").singular(/(m)ovies$/i,"$1ovie").singular(/(x|ch|ss|sh)es$/i,"$1").singular(/([m|l])ice$/i,"$1ouse").singular(/(bus)es$/i,"$1").singular(/(o)es$/i,"$1").singular(/(shoe)s$/i,"$1").singular(/(cris|ax|test)es$/i,"$1is").singular(/(octop|vir)i$/i,"$1us").singular(/(alias|status)es$/i,"$1").singular(/^(ox)en/i,"$1").singular(/(vert|ind)ices$/i,"$1ex").singular(/(matr)ices$/i,"$1ix").singular(/(quiz)zes$/i,"$1").irregular("person","people").irregular("man","men").irregular("child","children").irregular("sex","sexes").irregular("move","moves").irregular("cow","kine").uncountable("equipment","information","rice","money","species","series","fish","sheep");e.extend({interpolate:function(t,n,r){r=e.extend({},$.interpolate.defaults,r);var i={};var s=[];for(var o in n){s.push(a(o))}t=t.replace(new RegExp("(?:(\\\\)?"+a(r.prefix)+"("+s.join("|")+")"+a(r.suffix)+")","g"),function(e,t,s){if(t){return r.prefix+s+r.suffix}else{var o=n[s];if($.type(o)=="function"){o=o()}return i[s]=r.encode?encodeURIComponent(o):o}});var u={};for(var o in n){if(!(o in i)){u[o]=n[o]}}return{text:t,skipped:u,replaced:i}}});e.extend(e.interpolate,{defaults:{prefix:"%",suffix:"%",encode:false}});e.extend({withDelimiter:function(e,t){if(!t)t=",";var n=e.toString().split(".");var r=n[0];var i=/(\d+)(\d{3})/;while(i.test(r)){r=r.replace(i,"$1,$2")}var s=n.length>1?"."+n[1]:"";return r+s}})})($);
