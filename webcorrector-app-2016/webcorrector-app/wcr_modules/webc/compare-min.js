
var compare=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;a=function(e){return e===">"};f=function(e){return e==="<"};c=function(e){return/^\s+$/.test(e)};l=function(e){return/^\s*<[^>]+>\s*$/.test(e)};h=function(e){return!l(e)};e=function(){function e(e,t,n){this.start_in_before=e;this.start_in_after=t;this.length=n;this.end_in_before=this.start_in_before+this.length-1;this.end_in_after=this.start_in_after+this.length-1}return e}();u=function(e){var t,n,r,i,s,o;r="char";n="";i=[];for(s=0,o=e.length;s<o;s++){t=e[s];switch(r){case"tag":if(a(t)){n+=">";i.push(n);n="";if(c(t)){r="whitespace"}else{r="char"}}else{n+=t}break;case"char":if(f(t)){if(n){i.push(n)}n="<";r="tag"}else if(/\s/.test(t)){if(n){i.push(n)}n=t;r="whitespace"}else if(/[_a-zA-Z0-9_\u0410-\u042F\u0430-\u044F\u0401\u0451\#@]+/i.test(t)){n+=t}else{if(n){i.push(n)}n=t}break;case"whitespace":if(f(t)){if(n){i.push(n)}n="<";r="tag"}else if(c(t)){n+=t}else{if(n){i.push(n)}n=t;r="char"}break;default:throw new Error("Unknown mode "+r)}}if(n){i.push(n)}return i};s=function(t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w,E;f=i;a=o;l=0;m={};for(h=b=i;i<=s?b<s:b>s;h=i<=s?++b:--b){y={};d=t[h];p=r[d];for(w=0,E=p.length;w<E;w++){c=p[w];if(c<o){continue}if(c>=u){break}if(m[c-1]==null){m[c-1]=0}g=m[c-1]+1;y[c]=g;if(g>l){f=h-g+1;a=c-g+1;l=g}}m=y}if(l!==0){v=new e(f,a,l)}return v};d=function(e,t,n,r,i,o,u,a){var f;f=s(e,t,n,r,i,o,u);if(f!=null){if(r<f.start_in_before&&o<f.start_in_after){d(e,t,n,r,f.start_in_before,o,f.start_in_after,a)}a.push(f);if(f.end_in_before<=i&&f.end_in_after<=u){d(e,t,n,f.end_in_before+1,i,f.end_in_after+1,u,a)}}return a};r=function(e){var t,n,r,i,s,o;if(e.find_these==null){throw new Error("params must have find_these key")}if(e.in_these==null){throw new Error("params must have in_these key")}n={};o=e.find_these;for(i=0,s=o.length;i<s;i++){r=o[i];n[r]=[];t=e.in_these.indexOf(r);while(t!==-1){n[r].push(t);t=e.in_these.indexOf(r,t+1)}}return n};o=function(e,t){var n,i;i=[];n=r({find_these:e,in_these:t});return d(e,t,n,0,e.length,0,t.length,i)};t=function(t,n){var r,i,s,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;if(t==null){throw new Error("before_tokens?")}if(n==null){throw new Error("after_tokens?")}m=v=0;d=[];r={"false,false":"replace","true,false":"insert","false,true":"delete","true,true":"none"};h=o(t,n);h.push(new e(t.length,n.length,0));for(s=y=0,w=h.length;y<w;s=++y){f=h[s];c=m===f.start_in_before;l=v===f.start_in_after;i=r[[c,l].toString()];if(i!=="none"){d.push({action:i,start_in_before:m,end_in_before:i!=="insert"?f.start_in_before-1:void 0,start_in_after:v,end_in_after:i!=="delete"?f.start_in_after-1:void 0})}if(f.length!==0){d.push({action:"equal",start_in_before:f.start_in_before,end_in_before:f.end_in_before,start_in_after:f.start_in_after,end_in_after:f.end_in_after})}m=f.end_in_before+1;v=f.end_in_after+1}g=[];a={action:"none"};u=function(e){if(e.action!=="equal"){return false}if(e.end_in_before-e.start_in_before!==0){return false}return/^\s$/.test(t.slice(e.start_in_before,e.end_in_before+1||9e9))};for(b=0,E=d.length;b<E;b++){p=d[b];if(u(p)&&a.action==="replace"||p.action==="replace"&&a.action==="replace"){a.end_in_before=p.end_in_before;a.end_in_after=p.end_in_after}else{g.push(p);a=p}}return g};n=function(e,t,n){var r,i,s,o,u,a;t=t.slice(e,t.length+1||9e9);s=void 0;for(i=u=0,a=t.length;u<a;i=++u){o=t[i];r=n(o);if(r===true){s=i}if(r===false){break}}if(s!=null){return t.slice(0,s+1||9e9)}return[]};m=function(e,t){var r,i,s,o,u;o="";s=0;r=t.length;while(true){if(s>=r){break}i=n(s,t,h);s+=i.length;if(i.length!==0){o+=" <"+e+">"+i.join("")+"</"+e+"> "}if(s>=r){break}u=n(s,t,l);s+=u.length;o+=u.join("")}return o};p={equal:function(e,t,n){return t.slice(e.start_in_before,e.end_in_before+1||9e9).join("")},insert:function(e,t,n){var r;r=n.slice(e.start_in_after,e.end_in_after+1||9e9);if(r.length==0)return"";if(r[0].replace(/^\s+|\s+$/g,"")==""){r.shift()}if(r[r.length-1]==" "){r.pop()}if(r[0]!==" "){return m("ins",r)}else{return""}},"delete":function(e,t,n){var r;r=t.slice(e.start_in_before,e.end_in_before+1||9e9);if(r.length==0)return"";if(r[0].replace(/^\s+|\s+$/g,"")==""){r.shift()}if(r[r.length-1]==" "){r.pop()}if(r[0]!==" "){return m("del",r)}else{return""}}};p.replace=function(e,t,n){return p["delete"](e,t,n)+p.insert(e,t,n)};v=function(e,t,n){var r,i,s,o;i="";for(s=0,o=n.length;s<o;s++){r=n[s];i+=p[r.action](r,e,t)}return i};return{alert:function(e){alert("hrere")},diff:function(e,n){var r;if(e===n){return e}e=u(e);n=u(n);r=t(e,n);return v(e,n,r)}};i.html_to_tokens=u;i.find_matching_blocks=o;o.find_match=s;o.create_index=r;i.calculate_operations=t;i.render_operations=v}();

module.exports = compare;
